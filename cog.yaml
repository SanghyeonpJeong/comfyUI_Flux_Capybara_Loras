build:
  gpu: true
  cuda: "12.1"
  python_version: "3.11" 
  python_packages:
    - "torch==2.1.2"
    - "diffusers==0.29.0"
    - "transformers==4.41.2"
    - "accelerate==0.30.1"
    - "huggingface-hub[cli]"
    # NumPy 1.x/2.x Ï∂©Îèå Ìï¥Í≤∞
    - "numpy<2.0" 

  # üåü (ÏàòÏ†ï) 'build_args:' ÏÑπÏÖò 'ÏÇ≠Ï†ú'

  run:
    # üåü 1. (ÏàòÏ†ï) PythonÏù¥ /run/secrets/my_hf_secret ÌååÏùºÏùÑ ÏßÅÏ†ë Ïó¥Ïñ¥ÏÑú ÌÜ†ÌÅ∞ÏùÑ ÏùΩÏäµÎãàÎã§.
    # üåü 2. (ÏàòÏ†ï) 'Ï§Ñ Î∞îÍøà' Ïò§Î•òÎ•º ÌîºÌïòÍ∏∞ ÏúÑÌï¥ Î™®Îì† Python Î™ÖÎ†πÏùÑ Ìïú Ï§ÑÎ°ú ÎßåÎì≠ÎãàÎã§.
    - "python -c \"from huggingface_hub import snapshot_download; print('Attempting to download model by reading secret file...'); snapshot_download(repo_id='black-forest-labs/FLUX.1-dev', local_dir='/src/models', token=open('/run/secrets/my_hf_secret').read().strip(), cache_dir='/root/.cache/huggingface')\""
    
    # 2. LoRA ÌååÏùº Îã§Ïö¥Î°úÎìú
    - "mkdir -p /src/loras"
    - "curl -L -o /src/loras/Flux_Capybara_v1.safetensors https://github.com/SanghyeonpJeong/comfyUI_Flux_Capybara_Loras/raw/main/Flux_Capybara_v1.safetensors"
    
    # GitÏù¥ Î≥ÄÍ≤Ω ÏÇ¨Ìï≠ÏùÑ Ïù∏ÏãùÌïòÎèÑÎ°ù Í∞ïÏ†ú Ï£ºÏÑù Ï∂îÍ∞Ä
    # Force update v26

predict: "predict.py:Predictor"